<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:viewmodels="clr-namespace:Tessera.ViewModels"
             mc:Ignorable="d"
             x:Class="Tessera.Views.SchemaView">
  <UserControl.DataContext>
    <viewmodels:SchemaViewModel />
  </UserControl.DataContext>
  <Grid RowDefinitions="Auto, *" Background="{DynamicResource PageBackgroundBrush}" Padding="12">
    <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,0,0,12">
      <TextBlock Text="Schema" FontSize="22" FontWeight="SemiBold" Foreground="{DynamicResource TextPrimaryBrush}" />
      <Button Content="Refresh" Command="{Binding RefreshCommand}" />
    </StackPanel>
    <Border Grid.Row="1" Background="{DynamicResource SurfaceBrush}" CornerRadius="10" Padding="12" BorderBrush="{DynamicResource BorderBrushLight}" BorderThickness="1">
      <ScrollViewer>
        <ItemsControl Items="{Binding Columns}">
          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <Border Margin="0,0,0,8" Padding="10" Background="{DynamicResource StrongSurfaceBrush}" CornerRadius="8" BorderBrush="{DynamicResource BorderBrushLight}" BorderThickness="1">
                <Grid ColumnDefinitions="2*,*,*,*,*,2*" RowDefinitions="Auto,Auto" ColumnSpacing="8" RowSpacing="6">
                  <StackPanel Grid.Column="0" Spacing="4">
                    <TextBlock Text="Column" FontWeight="SemiBold" />
                    <TextBox Text="{Binding Name, Mode=TwoWay}" BorderBrush="{DynamicResource BorderBrushLight}" />
                    <TextBlock Text="{Binding SampleValues, StringFormat=Samples: {0}}" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" />
                  </StackPanel>
                  <StackPanel Grid.Column="1" Spacing="4">
                    <TextBlock Text="Type" FontWeight="SemiBold" />
                    <ComboBox SelectedItem="{Binding Type, Mode=TwoWay}" Items="{x:Static viewmodels:SchemaViewModel.AvailableTypes}" Transition.Delta="0:0:0.15" />
                    <TextBlock Text="{Binding DistinctCount, StringFormat=Distinct: {0}}" Foreground="{DynamicResource TextSecondaryBrush}" FontSize="12" />
                  </StackPanel>
                  <StackPanel Grid.Column="2" Spacing="4">
                    <TextBlock Text="Nullable" FontWeight="SemiBold" />
                    <CheckBox IsChecked="{Binding IsNullable, Mode=TwoWay}" />
                    <TextBlock Text="{Binding IsEdited, StringFormat=Edited: {0}}" FontSize="11" />
                  </StackPanel>
                  <StackPanel Grid.Column="3" Spacing="4">
                    <TextBlock Text="Min" FontWeight="SemiBold" />
                    <TextBox Text="{Binding Min}" IsEnabled="{Binding IsNumeric}" />
                  </StackPanel>
                  <StackPanel Grid.Column="4" Spacing="4">
                    <TextBlock Text="Max" FontWeight="SemiBold" />
                    <TextBox Text="{Binding Max}" IsEnabled="{Binding IsNumeric}" />
                  </StackPanel>
                  <StackPanel Grid.Column="5" Spacing="4">
                    <TextBlock Text="State" FontWeight="SemiBold" />
                    <StackPanel Orientation="Horizontal" Spacing="6">
                      <TextBlock Text="âœ…" Foreground="{DynamicResource SuccessBrush}" />
                      <TextBlock Text="Live" Foreground="{DynamicResource TextPrimaryBrush}" />
                    </StackPanel>
                    <TextBlock Text="Type updates validate entire column" FontSize="11" Foreground="{DynamicResource TextSecondaryBrush}" />
                  </StackPanel>
                </Grid>
              </Border>
            </DataTemplate>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
      </ScrollViewer>
    </Border>
  </Grid>
</UserControl>
